var deleteMarker = findMarker(<%= @activity.id %>);
var markerIndex = allActivities.indexOf(deleteMarker);
allActivities.splice(markerIndex, 1);

var deleteActivity = deleteMarker.type;

for (var j = 0, deleteMarker; deleteMarker = activityArray[deleteActivity][j]; j++) {
  if (deleteMarker.activityId == <%= @activity.id %>) {
    // delete the marker from the map
    clearMarker(deleteMarker);

    // delete the marker from array
    var markerIndex = activityArray[deleteActivity].indexOf(deleteMarker);
    activityArray[deleteActivity].splice(markerIndex, 1);

    // update counter
    $("#" + deleteActivity + "Count").html(activityArray[deleteActivity].length);

    // update sidebar
    updateActivitySide(deleteActivity);
  }
}

// close the window
closeInfoWindow();
